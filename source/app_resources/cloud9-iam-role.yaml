- Effect: Allow
  Action:
  - ssm:GetParameter
  - eks:*
  - s3:*
  - elasticmapreduce:ListClusters
  - elasticmapreduce:DescribeCluster
  - elasticmapreduce:AddJobFlowSteps
  - aps:*
  - sqs:*
  - events:*
  - secretsmanager:*
  - ec2:Describe*
  - ec2:Get*
  - ec2:ModifyVolume
  - iam:Get*
  - iam:List*
  - iam:Tag*
  - iam:Delete*
  - iam:CreatePolicy
  - iam:CreateRole
  - iam:CreateInstanceProfile
  - iam:AttachRolePolicy
  - iam:AddRoleToInstanceProfile
  - iam:RemoveRoleFromInstanceProfile
  - iam:DetachRolePolicy
  - iam:CreateServiceLinkedRole
  - iam:UpdateAssumeRolePolicy
  - fis:*
  - iam:PassRole
  - cloudformation:CreateStack
  - emr-containers:ListVirtualClusters
  Resource: 
    - "*"
- Effect: Allow
  Action:
  - kafka:DescribeCluster
  - kafka:UpdateClusterConfiguration
  - kafka:List*
  - kafka:CreateConfiguration
  Resource:
  - arn:aws:kafka:{{REGION}}:{{AccountID}}:/*
  - arn:aws:kafka:{{REGION}}:{{AccountID}}:cluster/*
- Effect: Allow
  Action:
  - emr-containers:StartJobRun
  - emr-containers:List*
  - emr-containers:Describe*
  - emr-containers:DeleteVirtualCluster
  - emr-containers:CancelJobRun
  Resource: 
  - arn:aws:emr-containers:{{REGION}}:{{AccountID}}:/virtualclusters/*
- Effect: Allow
  Action:
  - emr-containers:TagResource
  - emr-containers:CreateVirtualCluster
  Resource: 
  - arn:aws:emr-containers:{{REGION}}:{{AccountID}}:/*
- Effect: Allow
  Sid: AllowPassRoleSageMaker
  Action:
  - iam:GetRole
  - iam:PassRole
  Resource:
  - arn:aws:iam::{{AccountID}}:role/lf-data-access-engineer
  - arn:aws:iam::{{AccountID}}:role/lf-data-access-analyst
  - arn:aws:iam::{{AccountID}}:role/*-vpc-cni
  - arn:aws:iam::{{AccountID}}:role/*-ebs-csi-driver
  - arn:aws:iam::{{AccountID}}:role/Karpenter-*-*
- Effect: Allow
  Sid: AllowClusterCreds
  Action:
  - elasticmapreduce:GetClusterSessionCredentials
  Condition:
    StringLike:
      elasticmapreduce:ExecutionRoleArn:
      - arn:aws:iam::{{AccountID}}:role/lf-data-access-engineer
      - arn:aws:iam::{{AccountID}}:role/lf-data-access-analyst
  Resource: 
    - "*"
- Effect: Allow
  Action:
  - ecr-public:GetAuthorizationToken
  - ecr:CreateRepository
  - ecr:GetAuthorizationToken
  - sts:GetServiceBearerToken
  - ecr-public:BatchCheckLayerAvailability
  - ecr-public:GetRepositoryPolicy
  - ecr-public:DescribeRepositories
  - ecr-public:DescribeRegistries
  - ecr-public:DescribeImages
  - ecr-public:DescribeImageTags
  - ecr-public:GetRepositoryCatalogData
  - ecr-public:GetRegistryCatalogData
  Resource: 
    - "*"
- Effect: Allow
  Action:
  - ecr:BatchGetImage
  - ecr:BatchCheckLayerAvailability
  - ecr:CompleteLayerUpload
  - ecr:DescribeImages
  - ecr:DescribeRepositories
  - ecr:GetDownloadUrlForLayer
  - ecr:InitiateLayerUpload
  - ecr:ListImages
  - ecr:PutImage
  - ecr:UploadLayerPart
  - ecr:InitiateLayerUpload
  - ecr:UploadLayerPart
  - ecr:CompleteLayerUpload
  Resource:
  - arn:aws:ecr:{{REGION}}:{{AccountID}}:repository/*
- Effect: Allow
  Action:    
  - logs:*
  Resource:
  - arn:aws:logs:*:*:*
- Effect: Allow
  Action: 
  - kinesis:DescribeStreamSummary
  - kinesis:ListShards
  - kinesis:DescribeStreamConsumer
  - kinesis:GetResourcePolicy
  - kinesis:GetShardIterator
  - kinesis:GetRecords
  - kinesis:DescribeStream
  - kinesis:DescribeLimits
  - kinesis:ListStreamConsumers
  - kinesis:ListTagsForStream
  - kinesis:CreateStream
  - glue:CreateDatabase
  - glue:CreateCrawler
  - glue:StartCrawler
  Resource:
  - "*"
